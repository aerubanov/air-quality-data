{
  "Comment": "A description of my state machine",
  "StartAt": "Dimension Loading",
  "States": {
    "Dimension Loading": {
      "Type": "Parallel",
      "Branches": [
        {
          "StartAt": "Sensor Loading",
          "States": {
            "Sensor Loading": {
              "Type": "Map",
              "ItemProcessor": {
                "ProcessorConfig": {
                  "Mode": "DISTRIBUTED",
                  "ExecutionType": "EXPRESS"
                },
                "StartAt": "Lambda Invoke",
                "States": {
                  "Lambda Invoke": {
                    "Type": "Task",
                    "Resource": "arn:aws:states:::lambda:invoke",
                    "OutputPath": "$.Payload",
                    "Parameters": {
                      "Payload.$": "$",
                      "FunctionName": "arn:aws:lambda:eu-central-1:307660119800:function:dimension-loader:$LATEST"
                    },
                    "Retry": [
                      {
                        "ErrorEquals": [
                          "Lambda.ServiceException",
                          "Lambda.AWSLambdaException",
                          "Lambda.SdkClientException",
                          "Lambda.TooManyRequestsException"
                        ],
                        "IntervalSeconds": 2,
                        "MaxAttempts": 6,
                        "BackoffRate": 2
                      }
                    ],
                    "End": true
                  }
                }
              },
              "End": true,
              "Label": "SensorLoading",
              "MaxConcurrency": 10,
              "ItemReader": {
                "Resource": "arn:aws:states:::s3:listObjectsV2",
                "Parameters": {
                  "Bucket": "transformed-bucket",
                  "Prefix": "sensors/"
                }
              },
              "ItemBatcher": {
                "MaxItemsPerBatch": 200
              }
            }
          }
        },
        {
          "StartAt": "Time Loading",
          "States": {
            "Time Loading": {
              "Type": "Map",
              "ItemProcessor": {
                "ProcessorConfig": {
                  "Mode": "DISTRIBUTED",
                  "ExecutionType": "EXPRESS"
                },
                "StartAt": "Lambda Invoke (1)",
                "States": {
                  "Lambda Invoke (1)": {
                    "Type": "Task",
                    "Resource": "arn:aws:states:::lambda:invoke",
                    "OutputPath": "$.Payload",
                    "Parameters": {
                      "Payload.$": "$",
                      "FunctionName": "arn:aws:lambda:eu-central-1:307660119800:function:dimension-loader:$LATEST"
                    },
                    "Retry": [
                      {
                        "ErrorEquals": [
                          "Lambda.ServiceException",
                          "Lambda.AWSLambdaException",
                          "Lambda.SdkClientException",
                          "Lambda.TooManyRequestsException"
                        ],
                        "IntervalSeconds": 2,
                        "MaxAttempts": 6,
                        "BackoffRate": 2
                      }
                    ],
                    "End": true
                  }
                }
              },
              "End": true,
              "Label": "TimeLoading",
              "MaxConcurrency": 10,
              "ItemReader": {
                "Resource": "arn:aws:states:::s3:listObjectsV2",
                "Parameters": {
                  "Bucket": "transformed-bucket",
                  "Prefix": "time/"
                }
              },
              "ItemBatcher": {
                "MaxItemsPerBatch": 200
              }
            }
          }
        },
        {
          "StartAt": "Location Loading",
          "States": {
            "Location Loading": {
              "Type": "Map",
              "ItemProcessor": {
                "ProcessorConfig": {
                  "Mode": "DISTRIBUTED",
                  "ExecutionType": "EXPRESS"
                },
                "StartAt": "Lambda Invoke (2)",
                "States": {
                  "Lambda Invoke (2)": {
                    "Type": "Task",
                    "Resource": "arn:aws:states:::lambda:invoke",
                    "OutputPath": "$.Payload",
                    "Parameters": {
                      "Payload.$": "$",
                      "FunctionName": "arn:aws:lambda:eu-central-1:307660119800:function:dimension-loader:$LATEST"
                    },
                    "Retry": [
                      {
                        "ErrorEquals": [
                          "Lambda.ServiceException",
                          "Lambda.AWSLambdaException",
                          "Lambda.SdkClientException",
                          "Lambda.TooManyRequestsException"
                        ],
                        "IntervalSeconds": 2,
                        "MaxAttempts": 6,
                        "BackoffRate": 2
                      }
                    ],
                    "End": true
                  }
                }
              },
              "End": true,
              "Label": "LocationLoading",
              "MaxConcurrency": 10,
              "ItemReader": {
                "Resource": "arn:aws:states:::s3:listObjectsV2",
                "Parameters": {
                  "Bucket": "transformed-bucket",
                  "Prefix": "locations/"
                }
              },
              "ItemBatcher": {
                "MaxItemsPerBatch": 200
              }
            }
          }
        }
      ],
      "Next": "Fact Loading"
    },
    "Fact Loading": {
      "Type": "Parallel",
      "End": true,
      "Branches": [
        {
          "StartAt": "Temperature Loading",
          "States": {
            "Temperature Loading": {
              "Type": "Map",
              "ItemProcessor": {
                "ProcessorConfig": {
                  "Mode": "DISTRIBUTED",
                  "ExecutionType": "EXPRESS"
                },
                "StartAt": "Lambda Invoke (3)",
                "States": {
                  "Lambda Invoke (3)": {
                    "Type": "Task",
                    "Resource": "arn:aws:states:::lambda:invoke",
                    "OutputPath": "$.Payload",
                    "Parameters": {
                      "Payload.$": "$",
                      "FunctionName": "arn:aws:lambda:eu-central-1:307660119800:function:fact-loader:$LATEST"
                    },
                    "Retry": [
                      {
                        "ErrorEquals": [
                          "Lambda.ServiceException",
                          "Lambda.AWSLambdaException",
                          "Lambda.SdkClientException",
                          "Lambda.TooManyRequestsException"
                        ],
                        "IntervalSeconds": 2,
                        "MaxAttempts": 6,
                        "BackoffRate": 2
                      }
                    ],
                    "End": true
                  }
                }
              },
              "End": true,
              "Label": "TemperatureLoading",
              "MaxConcurrency": 10,
              "ItemReader": {
                "Resource": "arn:aws:states:::s3:listObjectsV2",
                "Parameters": {
                  "Bucket": "transformed-bucket",
                  "Prefix": "temperature/"
                }
              }
            }
          }
        },
        {
          "StartAt": "Concentration Loading",
          "States": {
            "Concentration Loading": {
              "Type": "Map",
              "ItemProcessor": {
                "ProcessorConfig": {
                  "Mode": "DISTRIBUTED",
                  "ExecutionType": "EXPRESS"
                },
                "StartAt": "Lambda Invoke (4)",
                "States": {
                  "Lambda Invoke (4)": {
                    "Type": "Task",
                    "Resource": "arn:aws:states:::lambda:invoke",
                    "OutputPath": "$.Payload",
                    "Parameters": {
                      "Payload.$": "$",
                      "FunctionName": "arn:aws:lambda:eu-central-1:307660119800:function:fact-loader:$LATEST"
                    },
                    "Retry": [
                      {
                        "ErrorEquals": [
                          "Lambda.ServiceException",
                          "Lambda.AWSLambdaException",
                          "Lambda.SdkClientException",
                          "Lambda.TooManyRequestsException"
                        ],
                        "IntervalSeconds": 2,
                        "MaxAttempts": 6,
                        "BackoffRate": 2
                      }
                    ],
                    "End": true
                  }
                }
              },
              "End": true,
              "Label": "ConcentrationLoading",
              "MaxConcurrency": 10,
              "ItemReader": {
                "Resource": "arn:aws:states:::s3:listObjectsV2",
                "Parameters": {
                  "Bucket": "transformed-bucket",
                  "Prefix": "concentration/"
                }
              }
            }
          }
        }
      ]
    }
  }
}